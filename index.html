<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ö–ª–∏–Ω–∏—á–Ω–∞ –ü—ä—Ç–µ–∫–∞ ‚Äî –í–∞–ª–∏–¥–∞—Ç–æ—Ä</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg: #f0f2f5;
      --card: #ffffff;
      --primary: #1a56db;
      --primary-dark: #1642a8;
      --text: #1e293b;
      --text-muted: #64748b;
      --border: #dde2e9;
      --green: #16a34a;
      --green-bg: #ecfdf5;
      --green-border: #86efac;
      --red: #dc2626;
      --red-bg: #fef2f2;
      --red-border: #fca5a5;
      --amber-bg: #fffbeb;
      --amber-border: #fcd34d;
      --amber-text: #92400e;
      --radius: 14px;
      --shadow: 0 4px 24px rgba(0,0,0,0.07);
    }

    body {
      font-family: 'IBM Plex Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 24px 16px;
      -webkit-font-smoothing: antialiased;
    }

    .container { max-width: 640px; margin: 0 auto; }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    .header {
      background: linear-gradient(135deg, #1a56db 0%, #3730a3 100%);
      border-radius: var(--radius) var(--radius) 0 0;
      padding: 24px 28px;
      display: flex; align-items: center; gap: 14px;
      box-shadow: var(--shadow);
    }
    .header-icon {
      width: 46px; height: 46px;
      background: rgba(255,255,255,0.15);
      border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      font-size: 22px; flex-shrink: 0;
    }
    .header h1 { font-size: 20px; font-weight: 800; color: #fff; letter-spacing: -0.3px; }
    .header p { font-size: 12px; color: rgba(200,215,255,0.85); margin-top: 3px; }

    /* ‚îÄ‚îÄ Card ‚îÄ‚îÄ */
    .card {
      background: var(--card);
      border-radius: 0 0 var(--radius) var(--radius);
      padding: 28px;
      box-shadow: var(--shadow);
    }

    /* ‚îÄ‚îÄ Form ‚îÄ‚îÄ */
    label { display: block; font-size: 13px; font-weight: 600; color: var(--text); margin-bottom: 6px; }

    select, textarea {
      width: 100%; border: 1.5px solid var(--border); border-radius: 10px;
      padding: 12px 14px; font-family: 'IBM Plex Sans', sans-serif;
      font-size: 14px; color: var(--text); background: #fff; outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    select:focus, textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(26,86,219,0.12);
    }
    textarea {
      font-family: 'JetBrains Mono', monospace;
      font-size: 12.5px; height: 200px; resize: vertical; line-height: 1.6;
    }
    textarea::placeholder { color: #a0aec0; }
    .field + .field { margin-top: 18px; }

    /* ‚îÄ‚îÄ Button ‚îÄ‚îÄ */
    .btn-check {
      width: 100%; margin-top: 22px; padding: 14px;
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 15px; font-weight: 700; color: #fff;
      background: var(--primary); border: none; border-radius: 12px;
      cursor: pointer; transition: background 0.2s, transform 0.1s;
      box-shadow: 0 2px 8px rgba(26,86,219,0.25);
    }
    .btn-check:hover { background: var(--primary-dark); }
    .btn-check:active { transform: scale(0.985); }
    .btn-check:disabled { background: #cbd5e1; cursor: not-allowed; box-shadow: none; }

    /* ‚îÄ‚îÄ Results ‚îÄ‚îÄ */
    .results { margin-top: 24px; }

    .progress-header {
      display: flex; justify-content: space-between;
      font-size: 12px; font-weight: 500; color: var(--text-muted); margin-bottom: 5px;
    }
    .progress-bar { width: 100%; height: 8px; background: #e5e7eb; border-radius: 99px; overflow: hidden; }
    .progress-fill { height: 100%; border-radius: 99px; transition: width 0.7s cubic-bezier(0.4,0,0.2,1); }
    .progress-fill.green { background: var(--green); }
    .progress-fill.yellow { background: #eab308; }
    .progress-fill.red { background: var(--red); }

    /* Banners */
    .banner {
      margin-top: 18px; border-radius: 16px; padding: 36px 20px;
      text-align: center; border-width: 2px; border-style: solid;
      animation: bannerIn 0.4s ease;
    }
    @keyframes bannerIn {
      from { opacity: 0; transform: translateY(12px) scale(0.97); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }
    .banner-success { background: var(--green-bg); border-color: var(--green-border); }
    .banner-fail { background: var(--red-bg); border-color: var(--red-border); }
    .banner-icon { font-size: 60px; margin-bottom: 8px; }
    .banner h2 { font-size: 28px; font-weight: 800; letter-spacing: -0.5px; }
    .banner-success h2 { color: var(--green); }
    .banner-fail h2 { color: var(--red); }
    .banner .sub { margin-top: 6px; font-size: 14px; font-weight: 500; }
    .banner-success .sub { color: #15803d; }
    .banner-fail .sub { color: #b91c1c; }

    .missing-tags { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; margin-top: 16px; }
    .tag {
      display: inline-flex; align-items: center; gap: 5px;
      background: #fee2e2; color: #991b1b; border: 1px solid #fecaca;
      padding: 5px 12px; border-radius: 99px; font-size: 13px; font-weight: 600;
    }

    .warning-box {
      margin-top: 18px; background: var(--amber-bg); border: 1.5px solid var(--amber-border);
      border-radius: 12px; padding: 14px 18px; text-align: center;
      color: var(--amber-text); font-weight: 500; font-size: 14px;
    }

    .details-toggle {
      margin-top: 16px; background: none; border: none;
      font-family: 'IBM Plex Sans', sans-serif;
      font-size: 13px; font-weight: 600; color: var(--primary);
      cursor: pointer; display: flex; align-items: center; gap: 6px; padding: 0;
    }
    .details-toggle:hover { color: var(--primary-dark); }

    .details-grid {
      margin-top: 12px; display: grid; grid-template-columns: 1fr 1fr;
      gap: 6px; max-height: 340px; overflow-y: auto;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    .detail-item {
      display: flex; align-items: center; gap: 8px;
      padding: 8px 12px; border-radius: 8px; font-size: 13px;
    }
    .detail-item.found { background: var(--green-bg); color: #166534; }
    .detail-item.missing { background: var(--red-bg); color: #991b1b; font-weight: 600; }
    .detail-icon { flex-shrink: 0; }

    @media (max-width: 500px) {
      .details-grid { grid-template-columns: 1fr; }
      .banner h2 { font-size: 22px; }
      .banner-icon { font-size: 48px; }
    }

    .footer { text-align: center; font-size: 11px; color: #a0aec0; margin-top: 18px; }
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <div class="header-icon">üè•</div>
    <div>
      <h1>–ö–ª–∏–Ω–∏—á–Ω–∞ –ü—ä—Ç–µ–∫–∞ ‚Äî –í–∞–ª–∏–¥–∞—Ç–æ—Ä</h1>
      <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è</p>
    </div>
  </div>

  <div class="card">
    <div class="field">
      <label for="pathway">–ö–ª–∏–Ω–∏—á–Ω–∞ –ø—ä—Ç–µ–∫–∞:</label>
      <select id="pathway">
        <option value="">‚Äî –ò–∑–±–µ—Ä–µ—Ç–µ –∫–ª–∏–Ω–∏—á–Ω–∞ –ø—ä—Ç–µ–∫–∞ ‚Äî</option>
        <option value="–ê–ü 13">–ê–ü 13 (–æ—á–∞–∫–≤–∞–π—Ç–µ —Å–∫–æ—Ä–æ)</option>
        <option value="–ê–ü 14">–ê–ü 14 (–æ—á–∞–∫–≤–∞–π—Ç–µ —Å–∫–æ—Ä–æ)</option>
        <option value="–ê–ü 15">–ê–ü 15 (–æ—á–∞–∫–≤–∞–π—Ç–µ —Å–∫–æ—Ä–æ)</option>
        <option value="–ö–ü 78.1">–ö–ü 78.1 (–æ—á–∞–∫–≤–∞–π—Ç–µ —Å–∫–æ—Ä–æ)</option>
        <option value="–ö–ü 79.1">–ö–ü 79.1 (–æ—á–∞–∫–≤–∞–π—Ç–µ —Å–∫–æ—Ä–æ)</option>
        <option value="–ö–ü 80.1">–ö–ü 80.1 (–æ—á–∞–∫–≤–∞–π—Ç–µ —Å–∫–æ—Ä–æ)</option>
        <option value="–ö–ü 81.1">–ö–ü 81.1</option>
      </select>
    </div>

    <div class="field">
      <label for="inputText">–¢–µ–∫—Å—Ç –∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞:</label>
      <textarea id="inputText" placeholder="–ü–æ—Å—Ç–∞–≤–µ—Ç–µ —Ç–µ–∫—Å—Ç–∞ —Å —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –æ—Ç –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è —Ç—É–∫..."></textarea>
    </div>

    <button class="btn-check" id="checkBtn" disabled>üîç –ü—Ä–æ–≤–µ—Ä–∏</button>

    <div id="results" class="results"></div>
  </div>

  <p class="footer">–ö–ª–∏–Ω–∏—á–Ω–∞ –ü—ä—Ç–µ–∫–∞ –í–∞–ª–∏–¥–∞—Ç–æ—Ä v1.0</p>
</div>

<script>
// ‚îÄ‚îÄ Pathway keyword definitions ‚îÄ‚îÄ
const PATHWAY_KEYWORDS = {
  "–ö–ü 81.1": [
    { label: "–õ–µ–≤–∫–æ—Ü–∏—Ç–∏", search: "–õ–µ–≤–∫–æ—Ü–∏—Ç–∏" },
    { label: "–•–µ–º–æ–≥–ª–æ–±–∏–Ω", search: "–•–µ–º–æ–≥–ª–æ–±–∏–Ω" },
    { label: "–ï—Ä–∏—Ç—Ä–æ—Ü–∏—Ç–∏", search: "–ï—Ä–∏—Ç—Ä–æ—Ü–∏—Ç–∏" },
    { label: "–•–µ–º–∞—Ç–æ–∫—Ä–∏—Ç", search: "–•–µ–º–∞—Ç–æ–∫—Ä–∏—Ç" },
    { label: "MCV", regex: /\bMCV\b/ },
    { label: "MCH", regex: /\bMCH\b/ },
    { label: "MCHC", regex: /\bMCHC\b/ },
    { label: "–¢—Ä–æ–º–±–æ—Ü–∏—Ç–∏", search: "–¢—Ä–æ–º–±–æ—Ü–∏—Ç–∏" },
    { label: "ASAT", regex: /\bASAT\b/ },
    { label: "ALAT", regex: /\bALAT\b/ },
    { label: "GGT", regex: /\bGGT\b/ },
    { label: "–ê–ª–∫–∞–ª–Ω–∞ —Ñ–æ—Å—Ñ–∞—Ç–∞–∑–∞", search: "–ê–ª–∫–∞–ª–Ω–∞ —Ñ–æ—Å—Ñ–∞—Ç–∞–∑–∞" },
    { label: "–•–æ–ª–µ—Å—Ç–µ—Ä–æ–ª", search: "–•–æ–ª–µ—Å—Ç–µ—Ä–æ–ª" },
    { label: "VLDL", regex: /\bVLDL\b/ },
    { label: "HDL", regex: /\bHDL\b/ },
    { label: "LDL", regex: /\bLDL\b/ },
    { label: "–¢—Ä–∏–≥–ª–∏—Ü–µ—Ä–∏–¥–∏", search: "–¢—Ä–∏–≥–ª–∏—Ü–µ—Ä–∏–¥–∏" },
    { label: "–ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω - —Å–µ—Ä—É–º", search: "–ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω - —Å–µ—Ä—É–º" },
    { label: "–£—Ä–µ—è", search: "–£—Ä–µ—è" },
    { label: "cCa++", regex: /cCa/ },
    { label: "–ö–∞–ª—Ü–∏–π", search: "–ö–∞–ª—Ü–∏–π" },
    { label: "–ù–µ–æ—Ä–≥–∞–Ω–∏—á–µ–Ω —Ñ–æ—Å—Ñ–∞—Ç", search: "–ù–µ–æ—Ä–≥–∞–Ω–∏—á–µ–Ω —Ñ–æ—Å—Ñ–∞—Ç" },
    { label: "Mg", regex: /\bMg\b/ },
    { label: "–ù–∞—Ç—Ä–∏–π", search: "–ù–∞—Ç—Ä–∏–π" },
    { label: "–ö–∞–ª–∏–π", search: "–ö–∞–ª–∏–π" },
    { label: "–•–ª–æ—Ä–∏–¥", search: "–•–ª–æ—Ä–∏–¥" },
    { label: "PTH", regex: /\bPTH\b/ },
    { label: "25 OH Vitamin D TOTAL", search: "25 OH Vitamin D" },
    { label: "Beta Cross Laps", search: "Beta Cross Laps" },
    { label: "–ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω–æ–≤ –∫–ª–∏—Ä—ä–Ω—Å", search: "–ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω–æ–≤ –∫–ª–∏—Ä—ä–Ω—Å" },
    { label: "–ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω - —É—Ä–∏–Ω–∞", search: "–ö—Ä–µ–∞—Ç–∏–Ω–∏–Ω - —É—Ä–∏–Ω–∞" },
    { label: "–ö–∞–ª—Ü–∏–π 24—á- —É—Ä–∏–Ω–∞", search: "–ö–∞–ª—Ü–∏–π 24—á" },
    { label: "–§–æ—Å—Ñ–æ—Ä 24—á- —É—Ä–∏–Ω–∞", search: "–§–æ—Å—Ñ–æ—Ä 24—á" },
    { label: "–î–∏—É—Ä–µ–∑–∞ (–î-–º–ª)", regex: /–î-\d/ },
    { label: "–û—Å—Ç–µ–æ–º–µ—Ç—Ä–∏—è –Ω–∞ –¥–≤–µ –æ–±–ª–∞—Å—Ç–∏", search: "–û—Å—Ç–µ–æ–º–µ—Ç—Ä–∏—è" },
    { label: "–£–ó–î –Ω–∞ —à–∏—è", search: "–£–ó–î –Ω–∞ —à–∏—è" },
  ]
};

const CONFIGURED = ["–ö–ü 81.1"];

// ‚îÄ‚îÄ DOM ‚îÄ‚îÄ
const pathwayEl = document.getElementById("pathway");
const inputEl   = document.getElementById("inputText");
const checkBtn  = document.getElementById("checkBtn");
const resultsEl = document.getElementById("results");

function updateBtn() {
  checkBtn.disabled = !pathwayEl.value || !inputEl.value.trim();
}
pathwayEl.addEventListener("change", function() { updateBtn(); resultsEl.innerHTML = ""; });
inputEl.addEventListener("input", function() { updateBtn(); resultsEl.innerHTML = ""; });

// ‚îÄ‚îÄ Check logic ‚îÄ‚îÄ
function checkKeyword(text, kw) {
  return kw.regex ? kw.regex.test(text) : text.includes(kw.search);
}

checkBtn.addEventListener("click", function() {
  var pathway = pathwayEl.value;
  var text = inputEl.value;

  if (!CONFIGURED.includes(pathway)) {
    resultsEl.innerHTML = '<div class="warning-box">‚ö†Ô∏è –¢–∞–∑–∏ –∫–ª–∏–Ω–∏—á–Ω–∞ –ø—ä—Ç–µ–∫–∞ –≤—Å–µ –æ—â–µ –Ω–µ –µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–∞.</div>';
    return;
  }

  var keywords = PATHWAY_KEYWORDS[pathway];
  var checked = keywords.map(function(kw) {
    return { label: kw.label, found: checkKeyword(text, kw) };
  });
  var missing = checked.filter(function(r) { return !r.found; });
  var found   = checked.filter(function(r) { return r.found; });
  var total   = keywords.length;
  var pct     = Math.round((found.length / total) * 100);
  var barClass = pct === 100 ? "green" : pct > 60 ? "yellow" : "red";

  var html = '<div class="progress-header">' +
    '<span>–ù–∞–º–µ—Ä–µ–Ω–∏: ' + found.length + ' / ' + total + '</span>' +
    '<span>' + pct + '%</span></div>' +
    '<div class="progress-bar"><div class="progress-fill ' + barClass + '" style="width:' + pct + '%"></div></div>';

  if (missing.length === 0) {
    html += '<div class="banner banner-success">' +
      '<div class="banner-icon">‚úÖ</div>' +
      '<h2>Mission complete!</h2>' +
      '<p class="sub">–í—Å–∏—á–∫–∏ ' + total + ' –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è —Å–∞ –Ω–∞–ª–∏—á–Ω–∏.</p></div>';
  } else {
    var missingText = missing.length === 1
      ? '‚Äû' + missing[0].label + '" –ª–∏–ø—Å–≤–∞!'
      : missing.length + ' –∏–∑—Å–ª–µ–¥–≤–∞–Ω–∏—è –ª–∏–ø—Å–≤–∞—Ç!';
    var tags = missing.map(function(m) {
      return '<span class="tag">‚ùå ' + m.label + '</span>';
    }).join("");
    html += '<div class="banner banner-fail">' +
      '<div class="banner-icon">‚ö°</div>' +
      '<h2>Stop!</h2>' +
      '<p class="sub">' + missingText + '</p>' +
      '<div class="missing-tags">' + tags + '</div></div>';
  }

  var detailItems = checked.map(function(r) {
    var cls = r.found ? "found" : "missing";
    var icon = r.found ? "‚úÖ" : "‚ùå";
    return '<div class="detail-item ' + cls + '">' +
      '<span class="detail-icon">' + icon + '</span>' +
      '<span>' + r.label + '</span></div>';
  }).join("");

  var showGrid = missing.length > 0 ? "grid" : "none";
  html += '<button class="details-toggle" onclick="toggleDetails()">' +
    '<span id="detailArrow">' + (missing.length > 0 ? '‚ñº' : '‚ñ∂') + '</span> –î–µ—Ç–∞–π–ª–µ–Ω –ø—Ä–µ–≥–ª–µ–¥</button>' +
    '<div class="details-grid" id="detailsGrid" style="display:' + showGrid + '">' +
    detailItems + '</div>';

  resultsEl.innerHTML = html;
});

function toggleDetails() {
  var grid = document.getElementById("detailsGrid");
  var arrow = document.getElementById("detailArrow");
  if (grid.style.display === "none") {
    grid.style.display = "grid";
    arrow.textContent = "‚ñº";
  } else {
    grid.style.display = "none";
    arrow.textContent = "‚ñ∂";
  }
}
</script>

</body>
</html>
